import random
from collections import defaultdict

# Step 1: Build the Markov chain model
def build_markov_chain(text, n=1):
    words = text.split()
    markov_chain = defaultdict(list)

    for i in range(len(words) - n):
        key = tuple(words[i:i+n])
        next_word = words[i + n]
        markov_chain[key].append(next_word)

    return markov_chain

# Step 2: Generate text using the model
def generate_text(chain, length=50, n=1):
    start = random.choice(list(chain.keys()))
    result = list(start)

    for _ in range(length - n):
        state = tuple(result[-n:])
        next_words = chain.get(state)
        if not next_words:
            break
        next_word = random.choice(next_words)
        result.append(next_word)

    return ' '.join(result)

# Example usage
if _name_ == "_main_":
    sample_text = """
    The sun sets in the west. The sky turns orange. Birds fly home. 
    People watch the sunset and enjoy the
